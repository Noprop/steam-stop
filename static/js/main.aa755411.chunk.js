(this["webpackJsonpgreg-forster-project-five"]=this["webpackJsonpgreg-forster-project-five"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(4),i=a.n(n),r=a(30),c=a.n(r),o=(a(38),a(15)),l=a(5),h=a(6),u=a(8),d=a(7),p=(a(39),a(20));a(40);p.a.initializeApp({apiKey:"AIzaSyCdjnBKt1uXrJZHiQcH4JGUNcuN88jqvtQ",authDomain:"steam-stop.firebaseapp.com",databaseURL:"https://steam-stop.firebaseio.com",projectId:"steam-stop",storageBucket:"steam-stop.appspot.com",messagingSenderId:"837369691163",appId:"1:837369691163:web:5898435137c592b79f0cbe"});var j=p.a,m=a(13),b=a(32),f=a(17),v=a(31),O=a.n(v),g=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("ul",{className:"navigation",children:[Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#",children:"Home"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#",children:"Shop"})})]})}}]),a}(n.Component),y=a(16),x=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).displayWishlist=function(){e.setState({display:!e.state.display})},e.state={display:!1,games:[]},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.database().ref("wishlist").on("value",(function(t){var a=t.val();null===a&&e.setState({games:0});var s=[];for(var n in a)s.push(a[n]),e.setState({games:s})}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"wishlistContainer",children:[Object(s.jsx)(y.a,{icon:"heart",onClick:function(){return e.displayWishlist()},className:"".concat(this.state.display?"hidden":""),"aria-label":"Wishlist"}),Object(s.jsxs)("div",{className:"".concat(this.state.display?"displayWishlist":"hidden"),children:[Object(s.jsx)(y.a,{icon:"times",onClick:function(){return e.displayWishlist()}}),0!==this.state.games?this.state.games.map((function(t){return Object(s.jsxs)("div",{className:"gameContainer",children:[Object(s.jsxs)("div",{className:"game",children:[Object(s.jsx)("div",{className:"logoContainer",children:Object(s.jsx)("img",{src:t[3],alt:"Logo of ".concat(t[1])})}),Object(s.jsxs)("p",{children:["Price: $",t[2]/100]})]}),Object(s.jsx)(y.a,{icon:"trash",onClick:function(){return e.props.removeFromWishlist(t[0])}})]},t[0])})):Object(s.jsx)("h4",{children:"Add some games to the wish list!"})]})]})}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"banner"})}}]),a}(n.Component),k=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("header",{children:[Object(s.jsxs)("nav",{children:[Object(s.jsx)(g,{}),Object(s.jsx)(x,{removeFromWishlist:this.props.removeFromWishlist})]}),Object(s.jsx)(w,{})]})}}]),a}(n.Component),C=a(21),G=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a=t.target,s="checkbox"===a.type?a.checked:a.value,n=a.name;e.setState(Object(o.a)({},n,s))},e.handleSubmit=function(t){t.preventDefault(),e.props.handleFilterGames(e.state)},e.state={sortBy:!1,freeGames:!1},e}return Object(h.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("form",{className:"search",onSubmit:this.handleSubmit,children:[Object(s.jsxs)("label",{htmlFor:"radioOwners",className:"container",children:["Sort by owners",Object(s.jsx)("input",{type:"radio",name:"sortBy",value:"owners",id:"radioOwners",checked:"owners"===this.state.sortBy,onChange:this.handleInputChange}),Object(s.jsx)("span",{className:"newRadio"})]}),Object(s.jsxs)("label",{htmlFor:"radioPrice",className:"container",children:["Sort by price",Object(s.jsx)("input",{type:"radio",name:"sortBy",value:"price",id:"radioPrice",checked:"price"===this.state.sortBy,onChange:this.handleInputChange}),Object(s.jsx)("span",{className:"newRadio"})]}),Object(s.jsxs)("label",{htmlFor:"freeGames",className:"container",children:["Include free games",Object(s.jsx)("input",{type:"checkbox",name:"freeGames",value:"freeGames",id:"freeGames",checked:this.state.freeGames,onChange:this.handleInputChange}),Object(s.jsx)("span",{className:"checkmark"})]}),Object(s.jsx)("button",{value:"submit",children:"Submit"})]})}}]),a}(n.Component),S=function(e){for(var t=e.game,a=e.dbKey,n=e.addToWishlist,i=t.name,r=t.owners,c=t.price,o=t.header_img,l=r.toString().split(""),h=l.length-3;h>0;h-=3)l.splice(h,0,",");return Object(s.jsxs)("div",{className:"item",children:[Object(s.jsx)("img",{src:o,alt:"testing"}),Object(s.jsx)("div",{className:"title",children:Object(s.jsx)("p",{children:i})}),Object(s.jsxs)("p",{children:[l,"~ owners"]}),Object(s.jsxs)("p",{children:["$",c/100]}),Object(s.jsx)("button",{onClick:function(){return n(a,t)},children:"Add to wish list"})]})},N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleShowMoreGames=function(){var t=e.state,a=t.games,s=t.howManyGames,n=t.outputGamesArray,i=a.slice(s,s+9);e.setState({outputGamesArray:[].concat(Object(C.a)(n),Object(C.a)(i))}),e.setState({howManyGames:s+9})},e.handleFilterGames=function(t){if("owners"===t.sortBy){var a=j.database().ref("gameList/").orderByChild("owners");e.findGames(a,t.freeGames)}else if("price"===t.sortBy){var s=j.database().ref("gameList/").orderByChild("price");e.findGames(s,t.freeGames)}},e.findGames=function(t,a){t.once("value",(function(t){var s=[];a?t.forEach((function(e){var t=e.key,a=e.val();s.push([t,a])})):t.forEach((function(e){var t=e.key,a=e.val();a.price>0&&s.push([t,a])})),s.reverse(),e.setState({games:s}),e.setState({outputGamesArray:s.slice(0,8)})}))},e.state={games:[],outputGamesArray:[],howManyGames:9,filterGames:{}},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=j.database().ref("gameList/");this.findGames(e,!1)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("main",{children:[Object(s.jsxs)("section",{className:"gamesOutput",children:[Object(s.jsx)(G,{handleFilterGames:this.handleFilterGames}),this.state.outputGamesArray.map((function(t){return Object(s.jsx)(S,{game:t[1],dbKey:t[0],addToWishlist:e.props.addToWishlist},t[1].appid)}))]}),Object(s.jsx)("button",{className:"loadMore",onClick:this.handleShowMoreGames,children:"Load More"})]})}}]),a}(n.Component),W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(s.jsx)("footer",{children:Object(s.jsx)("p",{children:"Made by Greg Forster at Juno College 2020"})})}}]),a}(n.Component);m.b.add(b.a,f.a,f.b,f.c);var F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).addToWishlist=function(t,a){if(e.state.wishlist&&e.state.wishlist[t])alert("Already on wishlist!");else{var s=j.database().ref("wishlist"),n=j.database().ref("gameList/".concat(t,"/onWishlist")),i=a.name,r=a.price,c=a.logo_img,l=Object(o.a)({},t,[t,i,r,c]);s.update(l),n.update({onWishlist:!0});var h=e.state.wishlist;h[t]=l,e.setState({wishlist:h})}},e.removeFromWishlist=function(t){var a=j.database().ref("gameList/"+t),s=j.database().ref("wishlist/"+t),n=e.state.wishlist;delete n[t],e.setState({wishlist:n}),a.update({onWishlist:!1}),s.set({})},e.state={games:null,wishlist:{}},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=j.database().ref(),a=j.database().ref("gameList");j.database().ref("wishlist").once("value",(function(t){var a=t.val();a&&e.setState({wishlist:a})}));var s=Date.now();t.once("value",(function(e){var n=e.val();s>n.time+3e9&&(t.update({time:s}),O()({method:"GET",url:"https://cors-anywhere.herokuapp.com/https://steamspy.com/api.php?request=top100in2weeks",responseType:"json"}).then((function(e){var t=e.data;for(var s in a.once("value",(function(e){var t=e.val();for(var s in t)if(!t[s].logo_img){var n=t[s].appid;a.child(s).update({logo_img:"https://cdn.cloudflare.steamstatic.com/steam/apps/".concat(n,"/logo.png")})}})),a.once("value",(function(e){var t=e.val();for(var s in t)if(!t[s].header_img){var n=t[s].appid;a.child(s).update({logo_img:"https://steamcdn-a.akamaihd.net/steam/apps/".concat(n,"/header.jpg")})}})),a.once("value",(function(e){var t=e.val();for(var s in t){if(void 0===t[s].onWishlist)a.child(s).update({onWishlist:!1})}})),a.once("value",(function(e){var t=e.val();for(var s in t){var n=a.child(s),i=t[s];if("string"===typeof i.discount){var r=parseInt(i.discount);n.update({discount:r})}if("string"===typeof i.price){var c=parseInt(i.price);n.update({price:c})}if("string"===typeof i.owners){var o=i.owners.split(" .. "),l=o[0].replace(/,/g,""),h=o[1].replace(/,/g,""),u=(parseInt(l)+parseInt(h))/2;n.update({owners:u})}}})),t)a.push(t[s])})).catch((function(e){console.log(e)})))}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(k,{removeFromWishlist:this.removeFromWishlist}),Object(s.jsx)(N,{addToWishlist:this.addToWishlist}),Object(s.jsx)(W,{})]})}}]),a}(n.Component),I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,64)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))};c.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(F,{})}),document.getElementById("root")),I()}},[[63,1,2]]]);
//# sourceMappingURL=main.aa755411.chunk.js.map